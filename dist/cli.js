#!/usr/bin/env node
"use strict";

var _terminalKit = require("terminal-kit");

var _youtubeStream = _interopRequireDefault(require("./youtube-stream"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var keys = {
  VOLUME_DOWN: 'LEFT',
  VOLUME_UP: 'RIGHT',
  EXIT: 'CTRL_C'
};

var main = function main() {
  _terminalKit.terminal.green.bold('Playing ChilledCow stream...\n');

  _terminalKit.terminal.grabInput();

  var lofiStream = (0, _youtubeStream["default"])();

  var progressBar = _terminalKit.terminal.progressBar({
    width: 80,
    title: 'Volume',
    eta: false,
    percent: true,
    barHeadChar: '=',
    syncMode: true
  });

  progressBar.update(lofiStream.volume.volume);

  _terminalKit.terminal.on('key', function (name, matches, data) {
    var offset = 0.1;

    switch (name) {
      case keys.VOLUME_DOWN:
        if (lofiStream.volume.volume - offset >= 0) lofiStream.volume.setVolume(lofiStream.volume.volume - 0.1);
        break;

      case keys.VOLUME_UP:
        if (lofiStream.volume.volume + offset <= 1) lofiStream.volume.setVolume(lofiStream.volume.volume + 0.1);
        break;

      case keys.EXIT:
        process.exit(1);
    }

    progressBar.update(lofiStream.volume.volume);
  });
};

main();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jbGkuanMiXSwibmFtZXMiOlsia2V5cyIsIlZPTFVNRV9ET1dOIiwiVk9MVU1FX1VQIiwiRVhJVCIsIm1haW4iLCJ0ZXJtaW5hbCIsImdyZWVuIiwiYm9sZCIsImdyYWJJbnB1dCIsImxvZmlTdHJlYW0iLCJwcm9ncmVzc0JhciIsIndpZHRoIiwidGl0bGUiLCJldGEiLCJwZXJjZW50IiwiYmFySGVhZENoYXIiLCJzeW5jTW9kZSIsInVwZGF0ZSIsInZvbHVtZSIsIm9uIiwibmFtZSIsIm1hdGNoZXMiLCJkYXRhIiwib2Zmc2V0Iiwic2V0Vm9sdW1lIiwicHJvY2VzcyIsImV4aXQiXSwibWFwcGluZ3MiOiJBQUFBOzs7QUFFQTs7QUFDQTs7OztBQUVBLElBQU1BLElBQUksR0FBRztBQUNUQyxFQUFBQSxXQUFXLEVBQUUsTUFESjtBQUVUQyxFQUFBQSxTQUFTLEVBQUUsT0FGRjtBQUdUQyxFQUFBQSxJQUFJLEVBQUU7QUFIRyxDQUFiOztBQUtBLElBQU1DLElBQUksR0FBRyxTQUFQQSxJQUFPLEdBQU07QUFDZkMsd0JBQVNDLEtBQVQsQ0FBZUMsSUFBZixDQUFvQixnQ0FBcEI7O0FBQ0FGLHdCQUFTRyxTQUFUOztBQUNBLE1BQU1DLFVBQVUsR0FBRyxnQ0FBbkI7O0FBRUEsTUFBTUMsV0FBVyxHQUFHTCxzQkFBU0ssV0FBVCxDQUFxQjtBQUNyQ0MsSUFBQUEsS0FBSyxFQUFFLEVBRDhCO0FBRXJDQyxJQUFBQSxLQUFLLEVBQUUsUUFGOEI7QUFHckNDLElBQUFBLEdBQUcsRUFBRSxLQUhnQztBQUlyQ0MsSUFBQUEsT0FBTyxFQUFFLElBSjRCO0FBS3JDQyxJQUFBQSxXQUFXLEVBQUUsR0FMd0I7QUFNckNDLElBQUFBLFFBQVEsRUFBRTtBQU4yQixHQUFyQixDQUFwQjs7QUFTQU4sRUFBQUEsV0FBVyxDQUFDTyxNQUFaLENBQW1CUixVQUFVLENBQUNTLE1BQVgsQ0FBa0JBLE1BQXJDOztBQUNBYix3QkFBU2MsRUFBVCxDQUFZLEtBQVosRUFBbUIsVUFBQ0MsSUFBRCxFQUFPQyxPQUFQLEVBQWdCQyxJQUFoQixFQUF5QjtBQUN4QyxRQUFNQyxNQUFNLEdBQUcsR0FBZjs7QUFDQSxZQUFRSCxJQUFSO0FBQ0EsV0FBS3BCLElBQUksQ0FBQ0MsV0FBVjtBQUNJLFlBQUlRLFVBQVUsQ0FBQ1MsTUFBWCxDQUFrQkEsTUFBbEIsR0FBMkJLLE1BQTNCLElBQXFDLENBQXpDLEVBQTRDZCxVQUFVLENBQUNTLE1BQVgsQ0FBa0JNLFNBQWxCLENBQTRCZixVQUFVLENBQUNTLE1BQVgsQ0FBa0JBLE1BQWxCLEdBQTJCLEdBQXZEO0FBQzVDOztBQUNKLFdBQUtsQixJQUFJLENBQUNFLFNBQVY7QUFDSSxZQUFJTyxVQUFVLENBQUNTLE1BQVgsQ0FBa0JBLE1BQWxCLEdBQTJCSyxNQUEzQixJQUFxQyxDQUF6QyxFQUE0Q2QsVUFBVSxDQUFDUyxNQUFYLENBQWtCTSxTQUFsQixDQUE0QmYsVUFBVSxDQUFDUyxNQUFYLENBQWtCQSxNQUFsQixHQUEyQixHQUF2RDtBQUM1Qzs7QUFDSixXQUFLbEIsSUFBSSxDQUFDRyxJQUFWO0FBQ0lzQixRQUFBQSxPQUFPLENBQUNDLElBQVIsQ0FBYSxDQUFiO0FBUko7O0FBVUFoQixJQUFBQSxXQUFXLENBQUNPLE1BQVosQ0FBbUJSLFVBQVUsQ0FBQ1MsTUFBWCxDQUFrQkEsTUFBckM7QUFDSCxHQWJEO0FBY0gsQ0E3QkQ7O0FBK0JBZCxJQUFJIiwic291cmNlc0NvbnRlbnQiOlsiIyEvdXNyL2Jpbi9lbnYgbm9kZVxuXG5pbXBvcnQgeyB0ZXJtaW5hbCB9IGZyb20gJ3Rlcm1pbmFsLWtpdCdcbmltcG9ydCBwbGF5U3RyZWFtIGZyb20gJy4veW91dHViZS1zdHJlYW0nXG5cbmNvbnN0IGtleXMgPSB7XG4gICAgVk9MVU1FX0RPV046ICdMRUZUJyxcbiAgICBWT0xVTUVfVVA6ICdSSUdIVCcsXG4gICAgRVhJVDogJ0NUUkxfQydcbn1cbmNvbnN0IG1haW4gPSAoKSA9PiB7XG4gICAgdGVybWluYWwuZ3JlZW4uYm9sZCgnUGxheWluZyBDaGlsbGVkQ293IHN0cmVhbS4uLlxcbicpXG4gICAgdGVybWluYWwuZ3JhYklucHV0KClcbiAgICBjb25zdCBsb2ZpU3RyZWFtID0gcGxheVN0cmVhbSgpXG5cbiAgICBjb25zdCBwcm9ncmVzc0JhciA9IHRlcm1pbmFsLnByb2dyZXNzQmFyKHtcbiAgICAgICAgd2lkdGg6IDgwLFxuICAgICAgICB0aXRsZTogJ1ZvbHVtZScsXG4gICAgICAgIGV0YTogZmFsc2UsXG4gICAgICAgIHBlcmNlbnQ6IHRydWUsXG4gICAgICAgIGJhckhlYWRDaGFyOiAnPScsXG4gICAgICAgIHN5bmNNb2RlOiB0cnVlXG4gICAgfSlcblxuICAgIHByb2dyZXNzQmFyLnVwZGF0ZShsb2ZpU3RyZWFtLnZvbHVtZS52b2x1bWUpXG4gICAgdGVybWluYWwub24oJ2tleScsIChuYW1lLCBtYXRjaGVzLCBkYXRhKSA9PiB7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IDAuMVxuICAgICAgICBzd2l0Y2ggKG5hbWUpIHtcbiAgICAgICAgY2FzZSBrZXlzLlZPTFVNRV9ET1dOOlxuICAgICAgICAgICAgaWYgKGxvZmlTdHJlYW0udm9sdW1lLnZvbHVtZSAtIG9mZnNldCA+PSAwKSBsb2ZpU3RyZWFtLnZvbHVtZS5zZXRWb2x1bWUobG9maVN0cmVhbS52b2x1bWUudm9sdW1lIC0gMC4xKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSBrZXlzLlZPTFVNRV9VUDpcbiAgICAgICAgICAgIGlmIChsb2ZpU3RyZWFtLnZvbHVtZS52b2x1bWUgKyBvZmZzZXQgPD0gMSkgbG9maVN0cmVhbS52b2x1bWUuc2V0Vm9sdW1lKGxvZmlTdHJlYW0udm9sdW1lLnZvbHVtZSArIDAuMSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2Uga2V5cy5FWElUOlxuICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpXG4gICAgICAgIH1cbiAgICAgICAgcHJvZ3Jlc3NCYXIudXBkYXRlKGxvZmlTdHJlYW0udm9sdW1lLnZvbHVtZSlcbiAgICB9KVxufVxuXG5tYWluKClcbiJdfQ==