#!/usr/bin/env node
"use strict";

var _terminalKit = require("terminal-kit");

var _youtubeStream = _interopRequireDefault(require("./youtube-stream"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var keys = {
  VOLUME_DOWN: 'LEFT',
  VOLUME_UP: 'RIGHT',
  EXIT: 'CTRL_C'
};

var main = function main() {
  _terminalKit.terminal.brightCyan('lofi-cli\n');

  _terminalKit.terminal.green.bold('\nPlaying ChilledCow stream...\n');

  _terminalKit.terminal.grabInput();

  var lofiStream = (0, _youtubeStream["default"])();

  var progressBar = _terminalKit.terminal.progressBar({
    width: 80,
    title: 'Volume',
    eta: false,
    percent: true,
    barHeadChar: '=',
    syncMode: true
  });

  progressBar.update(lofiStream.volume.volume);

  _terminalKit.terminal.on('key', function (name, matches, data) {
    var offset = 0.1;

    switch (name) {
      case keys.VOLUME_DOWN:
        if (lofiStream.volume.volume - offset >= 0) lofiStream.volume.setVolume(lofiStream.volume.volume - 0.1);
        break;

      case keys.VOLUME_UP:
        if (lofiStream.volume.volume + offset <= 1) lofiStream.volume.setVolume(lofiStream.volume.volume + 0.1);
        break;

      case keys.EXIT:
        process.exit(1);
    }

    progressBar.update(lofiStream.volume.volume);
  });
};

main();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jbGkuanMiXSwibmFtZXMiOlsia2V5cyIsIlZPTFVNRV9ET1dOIiwiVk9MVU1FX1VQIiwiRVhJVCIsIm1haW4iLCJ0ZXJtaW5hbCIsImJyaWdodEN5YW4iLCJncmVlbiIsImJvbGQiLCJncmFiSW5wdXQiLCJsb2ZpU3RyZWFtIiwicHJvZ3Jlc3NCYXIiLCJ3aWR0aCIsInRpdGxlIiwiZXRhIiwicGVyY2VudCIsImJhckhlYWRDaGFyIiwic3luY01vZGUiLCJ1cGRhdGUiLCJ2b2x1bWUiLCJvbiIsIm5hbWUiLCJtYXRjaGVzIiwiZGF0YSIsIm9mZnNldCIsInNldFZvbHVtZSIsInByb2Nlc3MiLCJleGl0Il0sIm1hcHBpbmdzIjoiQUFBQTs7O0FBRUE7O0FBQ0E7Ozs7QUFFQSxJQUFNQSxJQUFJLEdBQUc7QUFDVEMsRUFBQUEsV0FBVyxFQUFFLE1BREo7QUFFVEMsRUFBQUEsU0FBUyxFQUFFLE9BRkY7QUFHVEMsRUFBQUEsSUFBSSxFQUFFO0FBSEcsQ0FBYjs7QUFLQSxJQUFNQyxJQUFJLEdBQUcsU0FBUEEsSUFBTyxHQUFNO0FBQ2ZDLHdCQUFTQyxVQUFULENBQW9CLFlBQXBCOztBQUNBRCx3QkFBU0UsS0FBVCxDQUFlQyxJQUFmLENBQW9CLGtDQUFwQjs7QUFDQUgsd0JBQVNJLFNBQVQ7O0FBQ0EsTUFBTUMsVUFBVSxHQUFHLGdDQUFuQjs7QUFFQSxNQUFNQyxXQUFXLEdBQUdOLHNCQUFTTSxXQUFULENBQXFCO0FBQ3JDQyxJQUFBQSxLQUFLLEVBQUUsRUFEOEI7QUFFckNDLElBQUFBLEtBQUssRUFBRSxRQUY4QjtBQUdyQ0MsSUFBQUEsR0FBRyxFQUFFLEtBSGdDO0FBSXJDQyxJQUFBQSxPQUFPLEVBQUUsSUFKNEI7QUFLckNDLElBQUFBLFdBQVcsRUFBRSxHQUx3QjtBQU1yQ0MsSUFBQUEsUUFBUSxFQUFFO0FBTjJCLEdBQXJCLENBQXBCOztBQVNBTixFQUFBQSxXQUFXLENBQUNPLE1BQVosQ0FBbUJSLFVBQVUsQ0FBQ1MsTUFBWCxDQUFrQkEsTUFBckM7O0FBQ0FkLHdCQUFTZSxFQUFULENBQVksS0FBWixFQUFtQixVQUFDQyxJQUFELEVBQU9DLE9BQVAsRUFBZ0JDLElBQWhCLEVBQXlCO0FBQ3hDLFFBQU1DLE1BQU0sR0FBRyxHQUFmOztBQUNBLFlBQVFILElBQVI7QUFDQSxXQUFLckIsSUFBSSxDQUFDQyxXQUFWO0FBQ0ksWUFBSVMsVUFBVSxDQUFDUyxNQUFYLENBQWtCQSxNQUFsQixHQUEyQkssTUFBM0IsSUFBcUMsQ0FBekMsRUFBNENkLFVBQVUsQ0FBQ1MsTUFBWCxDQUFrQk0sU0FBbEIsQ0FBNEJmLFVBQVUsQ0FBQ1MsTUFBWCxDQUFrQkEsTUFBbEIsR0FBMkIsR0FBdkQ7QUFDNUM7O0FBQ0osV0FBS25CLElBQUksQ0FBQ0UsU0FBVjtBQUNJLFlBQUlRLFVBQVUsQ0FBQ1MsTUFBWCxDQUFrQkEsTUFBbEIsR0FBMkJLLE1BQTNCLElBQXFDLENBQXpDLEVBQTRDZCxVQUFVLENBQUNTLE1BQVgsQ0FBa0JNLFNBQWxCLENBQTRCZixVQUFVLENBQUNTLE1BQVgsQ0FBa0JBLE1BQWxCLEdBQTJCLEdBQXZEO0FBQzVDOztBQUNKLFdBQUtuQixJQUFJLENBQUNHLElBQVY7QUFDSXVCLFFBQUFBLE9BQU8sQ0FBQ0MsSUFBUixDQUFhLENBQWI7QUFSSjs7QUFVQWhCLElBQUFBLFdBQVcsQ0FBQ08sTUFBWixDQUFtQlIsVUFBVSxDQUFDUyxNQUFYLENBQWtCQSxNQUFyQztBQUNILEdBYkQ7QUFjSCxDQTlCRDs7QUFnQ0FmLElBQUkiLCJzb3VyY2VzQ29udGVudCI6WyIjIS91c3IvYmluL2VudiBub2RlXG5cbmltcG9ydCB7IHRlcm1pbmFsIH0gZnJvbSAndGVybWluYWwta2l0J1xuaW1wb3J0IHBsYXlTdHJlYW0gZnJvbSAnLi95b3V0dWJlLXN0cmVhbSdcblxuY29uc3Qga2V5cyA9IHtcbiAgICBWT0xVTUVfRE9XTjogJ0xFRlQnLFxuICAgIFZPTFVNRV9VUDogJ1JJR0hUJyxcbiAgICBFWElUOiAnQ1RSTF9DJ1xufVxuY29uc3QgbWFpbiA9ICgpID0+IHtcbiAgICB0ZXJtaW5hbC5icmlnaHRDeWFuKCdsb2ZpLWNsaVxcbicpXG4gICAgdGVybWluYWwuZ3JlZW4uYm9sZCgnXFxuUGxheWluZyBDaGlsbGVkQ293IHN0cmVhbS4uLlxcbicpXG4gICAgdGVybWluYWwuZ3JhYklucHV0KClcbiAgICBjb25zdCBsb2ZpU3RyZWFtID0gcGxheVN0cmVhbSgpXG5cbiAgICBjb25zdCBwcm9ncmVzc0JhciA9IHRlcm1pbmFsLnByb2dyZXNzQmFyKHtcbiAgICAgICAgd2lkdGg6IDgwLFxuICAgICAgICB0aXRsZTogJ1ZvbHVtZScsXG4gICAgICAgIGV0YTogZmFsc2UsXG4gICAgICAgIHBlcmNlbnQ6IHRydWUsXG4gICAgICAgIGJhckhlYWRDaGFyOiAnPScsXG4gICAgICAgIHN5bmNNb2RlOiB0cnVlXG4gICAgfSlcblxuICAgIHByb2dyZXNzQmFyLnVwZGF0ZShsb2ZpU3RyZWFtLnZvbHVtZS52b2x1bWUpXG4gICAgdGVybWluYWwub24oJ2tleScsIChuYW1lLCBtYXRjaGVzLCBkYXRhKSA9PiB7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IDAuMVxuICAgICAgICBzd2l0Y2ggKG5hbWUpIHtcbiAgICAgICAgY2FzZSBrZXlzLlZPTFVNRV9ET1dOOlxuICAgICAgICAgICAgaWYgKGxvZmlTdHJlYW0udm9sdW1lLnZvbHVtZSAtIG9mZnNldCA+PSAwKSBsb2ZpU3RyZWFtLnZvbHVtZS5zZXRWb2x1bWUobG9maVN0cmVhbS52b2x1bWUudm9sdW1lIC0gMC4xKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSBrZXlzLlZPTFVNRV9VUDpcbiAgICAgICAgICAgIGlmIChsb2ZpU3RyZWFtLnZvbHVtZS52b2x1bWUgKyBvZmZzZXQgPD0gMSkgbG9maVN0cmVhbS52b2x1bWUuc2V0Vm9sdW1lKGxvZmlTdHJlYW0udm9sdW1lLnZvbHVtZSArIDAuMSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2Uga2V5cy5FWElUOlxuICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpXG4gICAgICAgIH1cbiAgICAgICAgcHJvZ3Jlc3NCYXIudXBkYXRlKGxvZmlTdHJlYW0udm9sdW1lLnZvbHVtZSlcbiAgICB9KVxufVxuXG5tYWluKClcbiJdfQ==